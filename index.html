<html>
    <head>
        <title>Kansas Comet Example</title>
        <script type="text/javascript" src="js/jquery.js"></script>
        <script type="text/javascript" src="js/jquery-json.js"></script>
        <script type="text/javascript" src="js/kansas-comet.js"></script>
        <link type="text/css" href="css/ui-lightness/jquery-ui.css" rel="Stylesheet" />
        <script type="text/javascript" src="js/jquery-ui.js"></script>
    </head>
    <body>

    <div align="center" style="border: 1px solid; padding: 10px; display: inline-block; line-height: 3em;">
      <button id="reset" class="click">Reset</button>
      <button id="down" class="click">-1</button>
      <button id="up" class="click">+1</button>
      <br/>
      <span id="fib-out" style="font-size: x-large;" class="click">fib 0 = 1</span>
      <br/>
      <div id="slider" style="width: 200px" class="slide"></div>
    </div>

        <div id="no-debug-log"></div>

        <script type="text/javascript">

	  // You only really need one audio context
	  var audioCtx = new (window.AudioContext || window.webkitAudioContext)();
	  var sounds = [];
	  
          function CreateOscillator(freq,det,osctype) {
	      return function(u) {
		  var osc		= audioCtx.createOscillator();
		  osc.frequency.value	= freq;
		  osc.detune.value	= det;
		  osc.type		= osctype;
		  
		  var count		= sounds.push(osc);
		  
		  $.kc.reply(u,[count - 1,osc.frequency.value, osc.detune.value,osc.type,
				osc.numberOfInputs, osc.numberOfOutputs, osc.channelCount,
				osc.channelCountMode, osc.channelInterpretation
		  	       ]);
		  // $.kc.reply(u,[count - 1]);		  
	      }
	  }

          function CreateGain(val) {
	      return function(u) {
		  var gainNode		= audioCtx.createGain();
		  gainNode.gain.value	= val;
		  
		  var count		= sounds.push(gainNode);

		  // $.kc.reply(u,[count - 1, gainNode.defaultValue, gainNode.maxValue,
		  // 		gainNode.minValue, gainNode.value
		  // 	       ]);
		  $.kc.reply(u,[count - 1,"AudioParam Gain " + (count - 1).toString() + " " + 
				gainNode.gain.value.toString(), gainNode.numberOfInputs,
				gainNode.numberOfOutputs, gainNode.channelCount,
				gainNode.channelCountMode, gainNode.channelInterpretation
		  	       ]);		  
		  // $.kc.reply(u,[count - 1,osc.frequency.value, osc.detune.value,osc.type,
		  // 		osc.numberOfInputs, osc.numberOfOutputs, osc.channelCount,
		  // 		osc.channelCountMode, osc.channelInterpretation
		  // 	       ]);
		  // $.kc.reply(u,[count - 1]);		  
	      }
	  }

	  
            $(document).ready(function() {
                $.kc.connect("/example");

                $("button").button();

                $( "#slider" ).slider({
                        range: "min",
                        value: 0,
                        min: 0,
                        max: 25
                });
            });
        </script>
    </body>
</html>
